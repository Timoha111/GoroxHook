local Fatality = loadstring(game:HttpGet("https://raw.githubusercontent.com/4lpaca-pin/Fatality/refs/heads/main/src/source.luau"))()
local Notification = Fatality:CreateNotifier()

Fatality:Loader({
    Name = "FATALITY",
    Duration = 4
})

Notification:Notify({
    Title = "FATALITY",
    Content = "Combat system loaded for "..game.Players.LocalPlayer.DisplayName,
    Icon = "skull"
})

local Window = Fatality.new({
    Name = "FATALITY",
    Expire = "never",
})

-- COMBAT TAB
local Combat = Window:AddMenu({
    Name = "COMBAT",
    Icon = "crosshair"
})

do
    local Aimbot = Combat:AddSection({
        Position = 'left',
        Name = "AIMBOT"
    })
    
    local Silent = Combat:AddSection({
        Position = 'center',
        Name = "SILENT AIM"
    })
    
    local Movement = Combat:AddSection({
        Position = 'right',
        Name = "MOVEMENT"
    })
    
    -- AIMBOT FUNCTIONS
    local AimToggle = Aimbot:AddToggle({
        Name = "Enable Aimbot",
        Risky = true
    })
    
    Aimbot:AddDropdown({
        Name = "Aimbot Part",
        Values = {"Head", "Torso", "Random"}
    })
    
    Aimbot:AddSlider({
        Name = "Aimbot FOV",
        Type = "Â°",
        Default = 50
    })
    
    Aimbot:AddKeybind({
        Name = "Aimbot Key"
    })
    
    -- SILENT AIM FUNCTIONS
    local SilentToggle = Silent:AddToggle({
        Name = "Silent Aim",
        Risky = true
    })
    
    Silent:AddSlider({
        Name = "Hit Chance",
        Type = "%",
        Default = 100
    })
    
    Silent:AddDropdown({
        Name = "Silent Aim Part",
        Values = {"Head", "UpperTorso", "HumanoidRootPart"}
    })
    
    -- MOVEMENT FUNCTIONS
    local StrafeToggle = Movement:AddToggle({
        Name = "Target Strafe",
        Risky = false
    })
    
    Movement:AddSlider({
        Name = "Strafe Radius",
        Type = " studs",
        Default = 5
    })
    
    local FakePosToggle = Movement:AddToggle({
        Name = "Fake Position",
        Risky = true
    })
    
    Movement:AddSlider({
        Name = "Fake Position Offset",
        Type = " studs",
        Default = 10
    })
    
    -- SAFE MODE TELEPORT ANIMATION
    local SafeModeToggle = Movement:AddToggle({
        Name = "Safe Mode Teleport",
        Risky = false
    })
    
    Movement:AddSlider({
        Name = "Animation Time Position",
        Type = " sec",
        Min = 2.2,
        Max = 2.5,
        Default = 2.3
    })
    
    Movement:AddKeybind({
        Name = "Activate Safe Teleport"
    })
    
    -- AIMBOT IMPLEMENTATION
    AimToggle:SetCallback(function(state)
        if state then
            game:GetService("RunService").RenderStepped:Connect(function()
                -- Aimbot targeting system
                local closestPlayer = getClosestPlayer()
                if closestPlayer then
                    local targetPart = getAimbotPart()
                    aimAt(closestPlayer.Character[targetPart])
                end
            end)
        end
    end)
    
    -- SILENT AIM IMPLEMENTATION
    SilentToggle:SetCallback(function(state)
        if state then
            local mt = getrawmetatable(game)
            local old = mt.__namecall
            setreadonly(mt, false)
            mt.__namecall = newcclosure(function(...)
                local args = {...}
                if state and getnamecallmethod() == "FindPartOnRayWithIgnoreList" then
                    -- Silent aim manipulation
                    local silentPart = getSilentAimPart()
                    if validateTarget() then
                        args[2] = Ray.new(args[2].Origin, (getTargetPosition(silentPart) - args[2].Origin))
                    end
                    return old(unpack(args))
                end
                return old(...)
            end)
        end
    end)
    
    -- TARGET STRAFE IMPLEMENTATION
    StrafeToggle:SetCallback(function(state)
        if state then
            game:GetService("RunService").Heartbeat:Connect(function()
                local target = getClosestPlayer()
                if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                    local root = game.Players.LocalPlayer.Character.HumanoidRootPart
                    local angle = tick() * 3
                    local radius = getStrafeRadius()
                    local offset = Vector3.new(math.cos(angle) * radius, 0, math.sin(angle) * radius)
                    root.CFrame = CFrame.new(target.Character.HumanoidRootPart.Position + offset)
                end
            end)
        end
    end)
    
    -- FAKE POSITION IMPLEMENTATION
    FakePosToggle:SetCallback(function(state)
        if state then
            local char = game.Players.LocalPlayer.Character
            local root = char.HumanoidRootPart
            local fakeRoot = root:Clone()
            fakeRoot.Parent = workspace
            fakeRoot.Transparency = 1
            fakeRoot.Anchored = true
            
            game:GetService("RunService").Heartbeat:Connect(function()
                if state then
                    -- Network spoofing
                    local offset = getFakePositionOffset()
                    fakeRoot.CFrame = root.CFrame + Vector3.new(offset, 0, offset)
                    spoofNetwork(fakeRoot)
                end
            end)
        end
    end)
    
    -- SAFE MODE TELEPORT IMPLEMENTATION
    SafeModeToggle:SetCallback(function(state)
        if state then
            local teleportKey = getTeleportKey()
            game:GetService("UserInputService").InputBegan:Connect(function(input)
                if input.KeyCode == teleportKey then
                    local char = game.Players.LocalPlayer.Character
                    local humanoid = char:FindFirstChild("Humanoid")
                    
                    if humanoid then
                        -- Load and play teleport animation
                        local teleportAnimation = Instance.new("Animation")
                        teleportAnimation.AnimationId = "rbxassetid://15609995579"
                        local animTrack = humanoid:LoadAnimation(teleportAnimation)
                        
                        -- Play animation at specific time position
                        local animTimePos = getAnimationTimePosition()
                        animTrack:Play()
                        animTrack:AdjustSpeed(0)
                        animTrack.TimePosition = animTimePos
                        
                        -- Perform teleport after animation delay
                        spawn(function()
                            wait(0.1)
                            local targetPos = calculateSafePosition()
                            root.CFrame = CFrame.new(targetPos)
                            animTrack:Stop()
                        end)
                    end
                end
            end)
        end
    end)
    
    -- HELPER FUNCTIONS
    function getClosestPlayer()
        local closest = nil
        local maxDist = getAimbotFOV()
        for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer and player.Character then
                local dist = (player.Character.Head.Position - game.Players.LocalPlayer.Character.Head.Position).Magnitude
                if dist < maxDist then
                    closest = player
                    maxDist = dist
                end
            end
        end
        return closest
    end
    
    function calculateSafePosition()
        local root = game.Players.LocalPlayer.Character.HumanoidRootPart
        return root.Position + root.CFrame.LookVector * 20
    end
end
